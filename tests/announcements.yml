config:
  payload:
    - path: '../data/announcements.csv'
      fields:
        - 'announcementid'
      skipHeader: true
  plugins:
    expect: {}
  target: "https://www.ilfapi.ilf2024.info"
  phases:
    - duration: 300
      arrivalRate: 50
      name: Sustained Load Phase
    - duration: 300
      arrivalRatpe: 50
      rampTo: 80
      name: Peak Phase
    - duration: 420
      arrivalRate: 100
      name: Sustained Peak Phase
scenarios:
    - flow:
      - get: 
          url: "/announcements"
          expect: 
            - statusCode: 200
            - contentType: "application/json"
            - contentType: "charset=utf-8"
            - json: "$.length > 0"
            - hasProperty: "$[0].announcementid!==undefined"
            - hasProperty: "$[0].eventid!==undefined"
            - hasProperty: "$[0].title!==undefined"
            - hasProperty: "$[0].description!==undefined"
            - hasProperty: "$[0].created_on!==undefined"
            - hasProperty: "$[0].updated_on!==undefined"
      - get:
          url: "/announcements/{{announcementid}}"
          expect:
            - statusCode: 200
            - contentType: "application/json"
            - contentType: "charset=utf-8"
            - hasProperty: "userid"
            - hasProperty: "uid"
            - hasProperty: "announcementid"
            - hasProperty: "eventid"
            - hasProperty: "title"
            - hasProperty: "description"
            - hasProperty: "created_on"
            - hasProperty: "updated_on"
